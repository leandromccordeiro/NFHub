---
description: 
globs: 
alwaysApply: true
---
# ğŸ› ï¸ Regras de Desenvolvimento Backend â€“ Laravel

Este guia define boas prÃ¡ticas, organizaÃ§Ã£o e padrÃµes de cÃ³digo para desenvolvimento backend com Laravel.

---

## ğŸ—‚ï¸ OrganizaÃ§Ã£o do Projeto

1. **Seguir a estrutura padrÃ£o do Laravel**
   - Controllers: `app/Http/Controllers/`
   - Models: `app/Models/`
   - Migrations: `database/migrations/`
   - Seeders: `database/seeders/`
   - Requests: `app/Http/Requests/`
   - Policies: `app/Policies/`

2. **Agrupar funcionalidades em mÃ³dulos/domÃ­nios se necessÃ¡rio**
   - Ex: `app/Http/Controllers/Cashflow/`, `app/Services/Cashflow/`

3. **Utilizar PSR-4 para autoload e nomes de classes**
   - Nome das classes devem refletir sua funÃ§Ã£o e contexto.

---

## âœ… Boas PrÃ¡ticas Gerais

4. **Utilizar Eloquent para interaÃ§Ãµes com o banco**
   - Evitar SQL bruto, exceto em casos especÃ­ficos.

5. **Validar dados sempre com Form Requests**
   - Ex: `StoreExpenseRequest`, `UpdateUserRequest`

6. **Aplicar InjeÃ§Ã£o de DependÃªncia nos controllers e services**
   - Evitar chamadas diretas a `new`.

7. **Separar regras de negÃ³cio complexas em Services ou Actions**
   - Controllers devem ser enxutos e focados em entrada/saÃ­da.

---

## ğŸ”’ SeguranÃ§a

8. **Usar `fillable` ou `guarded` nos Models**
   - Prevenir mass assignment.

9. **Sempre sanitizar e validar dados do usuÃ¡rio**
   - Especialmente inputs usados em consultas ou views.

10. **Utilizar policies ou gates para autorizaÃ§Ã£o**
    - Ex: `authorize('update', $expense);`

---

## ğŸ§ª Testes

11. **Escrever testes automatizados para lÃ³gica crÃ­tica**
    - Usar `Feature` para fluxo de usuÃ¡rio e `Unit` para regras de negÃ³cio.

12. **Nomear testes com clareza e descrever o comportamento esperado**
    - Ex: `test_user_can_create_expense()`.

---

## ğŸ§° Artisan e ConvenÃ§Ãµes

13. **Usar comandos Artisan para gerar arquivos**
    - Ex: `php artisan make:model`, `php artisan make:controller`

14. **Seguir convenÃ§Ãµes de nomenclatura**
    - Models: singular (`Expense`)
    - Controllers: plural (`ExpensesController` ou `ExpenseController`)
    - Tabelas: plural snake_case (`expenses`)

15. **Migrar e versionar o banco corretamente**
    - Usar migrations pequenas, claras e reversÃ­veis.

---

## ğŸ“¦ Outros

16. **Utilizar seeders e factories para dados de teste**
    - Ex: `ExpenseSeeder`, `UserFactory`

17. **Configurar e usar `.env` para separaÃ§Ã£o de ambientes**
    - Nunca versionar `.env` no Git.

18. **Usar helpers do Laravel sempre que possÃ­vel**
    - Ex: `route()`, `auth()`, `now()`, `asset()`.

---

**Revisado em:** 25/03/2025  
**Tecnologias:** Laravel 11+, PHP 8+
